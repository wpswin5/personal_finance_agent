/*! For license information please see 882.3105b1e4.chunk.js.LICENSE.txt */
(self.webpackChunkfinance_frontend=self.webpackChunkfinance_frontend||[]).push([[882],{147:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var a=t(43),c=t(579);const o=e=>{let{token:n,plaidConnected:t,showTabs:o=!0}=e;const[i,s]=(0,a.useState)([]),[r,l]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[h,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),[y,b]=(0,a.useState)("connections"),x=async()=>{f(!0),m(null);try{const e=await fetch("http://localhost:8000/plaid/connections",{headers:{Authorization:"Bearer ".concat(n)}});if(!e.ok){if(404===e.status||204===e.status)return void u([]);throw new Error("Failed to fetch connections")}const t=await e.json();u(t||[])}catch(p){console.error("Error fetching connections:",p),m(p.message)}finally{f(!1)}};return(0,a.useEffect)(()=>{t&&n&&x()},[t,n]),(0,a.useEffect)(()=>{t&&n&&"accounts"===y?(async()=>{f(!0),m(null);try{const e=await fetch("http://localhost:8000/plaid/accounts",{headers:{Authorization:"Bearer ".concat(n)}});if(!e.ok){if(404===e.status||204===e.status)return void s([]);throw new Error("Failed to fetch accounts")}const t=await e.json();s(t.accounts||[])}catch(p){console.error("Error fetching accounts:",p),m(p.message)}finally{f(!1)}})():t&&n&&"transactions"===y&&(async()=>{f(!0),m(null);try{const e=await fetch("http://localhost:8000/plaid/transactions?count=50",{headers:{Authorization:"Bearer ".concat(n)}});if(!e.ok){if(404===e.status||204===e.status)return void l([]);throw new Error("Failed to fetch transactions")}const t=await e.json();l(t.transactions||[])}catch(p){console.error("Error fetching transactions:",p),m(p.message)}finally{f(!1)}})()},[t,n,y]),o?t?(0,c.jsxs)("div",{className:"plaid-data-container",children:[(0,c.jsxs)("div",{className:"tabs",children:[(0,c.jsx)("button",{className:"tab ".concat("connections"===y?"active":""),onClick:()=>b("connections"),children:"Connections"}),(0,c.jsx)("button",{className:"tab ".concat("accounts"===y?"active":""),onClick:()=>b("accounts"),children:"Accounts"}),(0,c.jsx)("button",{className:"tab ".concat("transactions"===y?"active":""),onClick:()=>b("transactions"),children:"Transactions"})]}),p&&(0,c.jsxs)("div",{className:"alert alert-danger",children:["Error: ",p]}),h&&(0,c.jsx)("div",{className:"loading",children:"Loading..."}),"connections"===y&&(0,c.jsxs)("div",{className:"connections-tab",children:[(0,c.jsx)("h3",{children:"Bank Connections"}),0===d.length?(0,c.jsx)("p",{children:"No bank connections found."}):(0,c.jsx)("div",{className:"connections-list",children:d.map(e=>(0,c.jsxs)("div",{className:"connection-card",children:[(0,c.jsxs)("div",{className:"connection-info",children:[(0,c.jsx)("h4",{children:e.institution_name||"Unknown Institution"}),(0,c.jsxs)("p",{children:["Item ID: ",e.item_id]}),(0,c.jsxs)("p",{children:["Connected: ",new Date(e.created_at).toLocaleDateString()]})]}),(0,c.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this connection?"))try{if(!(await fetch("http://localhost:8000/plaid/connections/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}})).ok)throw new Error("Failed to delete connection");x()}catch(p){console.error("Error deleting connection:",p),m(p.message)}})(e.id),children:"Delete"})]},e.id))})]}),"accounts"===y&&(0,c.jsxs)("div",{className:"accounts-tab",children:[(0,c.jsx)("h3",{children:"Accounts"}),0===i.length?(0,c.jsx)("p",{children:"No accounts found."}):(0,c.jsx)("div",{className:"accounts-list",children:i.map(e=>(0,c.jsxs)("div",{className:"account-card",children:[(0,c.jsx)("h4",{children:e.name}),(0,c.jsxs)("p",{children:["Type: ",e.type," ",e.subtype&&"(".concat(e.subtype,")")]}),(0,c.jsxs)("p",{children:["Balance: $",e.balance.toFixed(2)," ",e.currency]})]},e.account_id))})]}),"transactions"===y&&(0,c.jsxs)("div",{className:"transactions-tab",children:[(0,c.jsx)("h3",{children:"Recent Transactions"}),0===r.length?(0,c.jsx)("p",{children:"No transactions found."}):(0,c.jsx)("div",{className:"transactions-list",children:r.map(e=>(0,c.jsxs)("div",{className:"transaction-card",children:[(0,c.jsxs)("div",{className:"transaction-info",children:[(0,c.jsx)("h4",{children:e.name}),e.merchant_name&&(0,c.jsxs)("p",{children:["Merchant: ",e.merchant_name]}),(0,c.jsxs)("p",{children:["Date: ",new Date(e.date).toLocaleDateString()]}),(0,c.jsxs)("p",{children:["Category: ",e.category.join(", ")]}),e.pending&&(0,c.jsx)("span",{className:"badge",children:"Pending"})]}),(0,c.jsx)("div",{className:"transaction-amount",children:(0,c.jsxs)("span",{className:e.amount>0?"debit":"credit",children:["$",Math.abs(e.amount).toFixed(2)]})})]},e.transaction_id))})]})]}):(0,c.jsx)("div",{className:"alert alert-info",children:"Connect your bank account to view your financial data."}):null}},556:function(e,n,t){!function(e,n){"use strict";var t="default"in n?n.default:n;function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach(function(n){o(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){if(null==e)return{};var t,a,c={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(c[t]=e[t]);return c}function s(e,n){if(null==e)return{};var t,a,c=i(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}function r(e,n){return l(e)||d(e,n)||u(e,n)||f()}function l(e){if(Array.isArray(e))return e}function d(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,c,o=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(a=t.next()).done)&&(o.push(a.value),!n||o.length!==n);i=!0);}catch(r){s=!0,c=r}finally{try{i||null==t.return||t.return()}finally{if(s)throw c}}return o}}function u(e,n){if(e){if("string"===typeof e)return h(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(e,n):void 0}}function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p=["src","checkForExisting"],m={},y=function(e){var n=document.querySelector('script[src="'.concat(e,'"]'));if(n)return m[e]={loading:!1,error:null,scriptEl:n}},b="undefined"!==typeof window&&"undefined"!==typeof window.document;function x(e){var t=e.src,a=e.checkForExisting,c=void 0!==a&&a,o=s(e,p),i=t?m[t]:void 0;!i&&c&&t&&b&&(i=y(t));var l=r(n.useState(i?i.loading:Boolean(t)),2),d=l[0],u=l[1],h=r(n.useState(i?i.error:null),2),f=h[0],x=h[1],j=r(n.useState(!1),2),v=j[0],k=j[1];return n.useEffect(function(){if(b&&t&&!v&&!f){var e;!(i=m[t])&&c&&(i=y(t)),i?e=i.scriptEl:((e=document.createElement("script")).src=t,Object.keys(o).forEach(function(n){void 0===e[n]?e.setAttribute(n,o[n]):e[n]=o[n]}),i=m[t]={loading:!0,error:null,scriptEl:e});var n=function(){i&&(i.loading=!1),u(!1),k(!0)},a=function(e){i&&(i.error=e),x(e)};return e.addEventListener("load",n),e.addEventListener("error",a),document.body.appendChild(e),function(){e.removeEventListener("load",n),e.removeEventListener("error",a),i&&i.loading&&(e.remove(),delete m[t])}}},[t]),[d,f]}var j=function(e,n,t){var a={};return delete Object.assign(a,e,o({},t,e[n]))[n],a},v=function(e,n){var t={plaid:null,open:!1,onExitCallback:null};if("undefined"===typeof window||!window.Plaid)throw new Error("Plaid not loaded");return t.plaid=n(c(c({},e),{},{onExit:function(n,a){t.open=!1,e.onExit&&e.onExit(n,a),t.onExitCallback&&t.onExitCallback()}})),{open:function(){t.plaid&&(t.open=!0,t.onExitCallback=null,t.plaid.open())},submit:function(e){t.plaid&&t.plaid.submit(e)},exit:function(e,n){t.open&&t.plaid?(t.onExitCallback=n,t.plaid.exit(e),e&&e.force&&(t.open=!1)):n&&n()},destroy:function(){t.plaid&&(t.plaid.destroy(),t.plaid=null)}}},k=function(e,n){var t=j(e,"publicKey","key");return v(t,n)},E="https://cdn.plaid.com/link/v2/stable/link-initialize.js",g=function(){},N=function(e){var t=r(x({src:E,checkForExisting:!0}),2),a=t[0],o=t[1],i=r(n.useState(null),2),s=i[0],l=i[1],d=r(n.useState(!1),2),u=d[0],h=d[1],f=(e.product||[]).slice().sort().join(",");n.useEffect(function(){if(!a&&(e.token||e.publicKey||e.receivedRedirectUri)){if(!o&&window.Plaid){null!=s&&s.exit({force:!0},function(){return s.destroy()});var n=k(c(c({},e),{},{onLoad:function(){h(!0),e.onLoad&&e.onLoad()}}),window.Plaid.create);return l(n),function(){return n.exit({force:!0},function(){return n.destroy()})}}console.error("Error loading Plaid",o)}},[a,o,e.publicKey,e.token,f]);var p=function(){e.token||console.warn("react-plaid-link: You cannot call open() without a valid token supplied to usePlaidLink. This is a no-op.")};return{error:o,ready:null!=s&&(!a||u),submit:s?s.submit:g,exit:s?s.exit:g,open:s?s.open:p}},w=["children","style","className"],S=function(e){var n=e.children,a=e.style,o=e.className,i=s(e,w),r=N(c({},i)),l=r.error,d=r.open;return t.createElement("button",{disabled:Boolean(l),type:"button",className:o,style:c({padding:"6px 4px",outline:"none",background:"#FFFFFF",border:"2px solid #F1F1F1",borderRadius:"4px"},a),onClick:function(){return d()}},n)};S.displayName="PlaidLink";var C,A=function(e){var a=e.style,o=e.className,i=e.onSuccess,s=e.onExit,l=e.onLoad,d=e.onEvent,u=e.token,h=e.receivedRedirectUri,f=n.useMemo(function(){return{onSuccess:i,onExit:s,onLoad:l,onEvent:d,token:u,receivedRedirectUri:h}},[i,s,l,d,u,h]),p=r(x({src:E,checkForExisting:!0}),2),m=p[0],y=p[1],b=n.useRef(null);return n.useEffect(function(){if(!m)if(!y&&window.Plaid){if(null!=f.token&&""!=f.token){var e=window.Plaid.createEmbedded(c({},f),b.current).destroy;return function(){e()}}console.error("A token is required to initialize embedded Plaid Link")}else console.error("Error loading Plaid",y)},[m,y,f,b]),t.createElement("div",{style:a,className:o,ref:b})};(C=e.PlaidLinkStableEvent||(e.PlaidLinkStableEvent={})).OPEN="OPEN",C.EXIT="EXIT",C.HANDOFF="HANDOFF",C.SELECT_INSTITUTION="SELECT_INSTITUTION",C.ERROR="ERROR",C.BANK_INCOME_INSIGHTS_COMPLETED="BANK_INCOME_INSIGHTS_COMPLETED",C.IDENTITY_VERIFICATION_PASS_SESSION="IDENTITY_VERIFICATION_PASS_SESSION",C.IDENTITY_VERIFICATION_FAIL_SESSION="IDENTITY_VERIFICATION_FAIL_SESSION",e.PlaidEmbeddedLink=A,e.PlaidLink=S,e.usePlaidLink=N,Object.defineProperty(e,"__esModule",{value:!0})}(n,t(43))},882:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>p});var a=t(43),c=t(447),o=t(556),i=t(579);const s=e=>{let{onSuccess:n,onError:t,token:c}=e;const[s,r]=(0,a.useState)(null),[l,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=!0;return c&&(async()=>{try{const n=await fetch("http://localhost:8000/user/id",{headers:{Authorization:"Bearer ".concat(c)}});if(!n.ok)return;const t=await n.json(),a=await fetch("http://localhost:8000/accounts/".concat(t,"/connections"),{headers:{Authorization:"Bearer ".concat(c)}});if(!a.ok)return;const o=await a.json();e&&h((o.plaid_users||[]).length>0)}catch(n){console.warn("Failed to check existing connections:",n)}})(),()=>{e=!1}},[c]);const f=(0,a.useCallback)(async(e,a)=>{try{const t=await fetch("http://localhost:8000/plaid/exchange_public_token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({public_token:e,user_id:"current_user"})});if(!t.ok)throw new Error("Failed to exchange public token");const{item_id:o}=await t.json();await fetch("http://localhost:8000/plaid/sync_item",{method:"POST",headers:{Authorization:"Bearer ".concat(c),"Content-Type":"application/json"},body:JSON.stringify({item_id:o})}),n&&n(o,a)}catch(o){console.error("Error exchanging public token:",o),t&&t(o)}},[c,n,t]),p={token:s,onSuccess:f,onError:e=>{console.error("Plaid Link error:",e),t&&t(e)},onExit:(e,n)=>{e&&(console.error("Plaid Link exit error:",e),t&&t(e))}},{open:m,ready:y}=(0,o.usePlaidLink)(p);return(0,a.useEffect)(()=>{if(s&&y)try{m()}catch(e){console.error("Failed to open Plaid Link:",e)}},[s,y]),(0,i.jsx)("div",{className:"plaid-link-container",children:s?(0,i.jsx)("button",{onClick:()=>m(),disabled:!y,className:"btn btn-success",children:y?"Connect to Bank":"Loading..."}):(0,i.jsx)("button",{onClick:async()=>{d(!0);try{const e=await fetch("http://localhost:8000/plaid/create_link_token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({user_id:"current_user"})});if(!e.ok)throw new Error("Failed to create link token");const n=await e.json();r(n.link_token)}catch(e){console.error("Error creating link token:",e),t&&t(e)}finally{d(!1)}},disabled:l,className:"btn btn-primary",children:l?"Creating Link...":u?"Connect Another Account":"Connect Bank Account"})})};var r=t(147);const l=e=>{let{token:n,plaidConnected:t,setPlaidConnected:c,setConnectionsRefreshKey:o}=e;const[l,d]=(0,a.useState)(null),u=(e,n)=>{console.log("Plaid connection successful:",e,n),d(e),"function"===typeof c&&c(!0),"function"===typeof o&&setTimeout(()=>o(e=>(e||0)+1),800),alert("Successfully connected to ".concat(e.institution_name||"your bank","!"))},h=e=>{console.error("Plaid connection error:",e),alert("Failed to connect to your bank. Please try again.")};return(0,i.jsxs)("div",{className:"plaid-integration",children:[(0,i.jsxs)("div",{className:"plaid-header",children:[(0,i.jsx)("h2",{children:"Bank Account Integration"}),(0,i.jsx)("p",{children:"Connect your bank accounts to automatically import transactions and get personalized financial insights."})]}),(0,i.jsxs)("div",{className:"plaid-content",children:[!t&&(0,i.jsx)("div",{className:"plaid-connect-section",children:(0,i.jsxs)("div",{className:"connect-action",children:[(0,i.jsx)(s,{onSuccess:u,onError:h,token:n}),(0,i.jsx)("p",{className:"security-note",children:"\ud83d\udd12 Your data is encrypted and secure."})]})}),(0,i.jsx)(r.A,{token:n,plaidConnected:t,showTabs:!1}),t&&(0,i.jsxs)("div",{className:"add-more-accounts",children:[(0,i.jsx)("h3",{children:"Add Another Bank Account"}),(0,i.jsx)(s,{onSuccess:u,onError:h,token:n})]})]})]})};var d=t(555),u=t(722);const h=(0,t(784).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),f=e=>{let{token:n,plaidConnected:t,setPlaidConnected:c,connectionsRefreshKey:o}=e;const[s,r]=(0,a.useState)([]),[l,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),[y,b]=(0,a.useState)(null),[x,j]=(0,a.useState)(""),[v,k]=(0,a.useState)(!1),E=async()=>{f(!0),m(null);try{const e=await(async()=>{try{const e=await u.A.get("http://localhost:8000/user/id",{headers:{Authorization:"Bearer ".concat(n)}});if(200!==e.status)throw new Error("Failed to fetch user id (status ".concat(e.status,")"));return e.data}catch(a){var e,t;const n=(null===a||void 0===a||null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||a.message||"Failed to fetch user id";throw new Error(n)}})(),t=await u.A.get("http://localhost:8000/accounts/".concat(e,"/connections"),{headers:{Authorization:"Bearer ".concat(n)}});if(200!==t.status)throw new Error("Failed to fetch connections (status ".concat(t.status,")"));const a=t.data.plaid_users||[];r(a),"function"===typeof c&&c(a.length>0)}catch(e){console.error(e),m(e.message)}finally{f(!1)}},g=async e=>{if(window.confirm("Are you sure you want to delete this connection?"))try{if(!(await fetch("http://localhost:8000/plaid/connections/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}})).ok)throw new Error("Failed to delete connection");E()}catch(t){m(t.message)}},N=()=>{b(null),j("")};return(0,a.useEffect)(()=>{n&&E()},[n]),(0,a.useEffect)(()=>{n&&"undefined"!==typeof o&&E()},[o]),(0,a.useEffect)(()=>{t&&n&&E()},[t,n]),(0,i.jsxs)("div",{className:"plaid-data-container",children:[p&&(0,i.jsxs)("div",{className:"alert alert-danger",children:["Error: ",p]}),l&&(0,i.jsx)("div",{className:"loading",children:"Loading..."}),(0,i.jsxs)("div",{className:"connections-tab",children:[(0,i.jsx)("h3",{children:"Existing Bank Connections"}),0===s.length?(0,i.jsx)("p",{children:"No bank connections found."}):(0,i.jsx)("div",{className:"connections-list-vertical",children:s.map(e=>{var t,a;return(0,i.jsxs)("div",{className:"connection-block",children:[(0,i.jsx)("div",{className:"connection-card",children:(0,i.jsxs)("div",{className:"connection-header",children:[(0,i.jsx)("div",{className:"connection-title",children:(0,i.jsx)("h4",{children:e.institution_name||"Unknown Institution"})}),(0,i.jsxs)("div",{className:"connection-meta",children:[(0,i.jsxs)("p",{children:["Accounts: ",(null===(t=e.accounts)||void 0===t?void 0:t.length)||0]}),(0,i.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>g(e.id),children:"Delete"})]})]})}),(0,i.jsx)("div",{className:"accounts-list",children:(null===(a=e.accounts)||void 0===a?void 0:a.length)>0?e.accounts.map(t=>(0,i.jsxs)("div",{className:"account-row",children:[(0,i.jsxs)("div",{className:"account-left",children:[(0,i.jsx)("h5",{className:"account-name",children:y===t.account_id?(0,i.jsxs)("div",{className:"inline-edit",children:[(0,i.jsx)("input",{className:"inline-edit-input",value:x,onChange:e=>j(e.target.value)}),(0,i.jsxs)("div",{className:"inline-edit-actions",children:[(0,i.jsx)("button",{className:"btn btn-sm",onClick:()=>(async e=>{if(e){k(!0);try{const t=await fetch("http://localhost:8000/accounts/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({nickname:x})});if(!t.ok){const e=await t.text().catch(()=>null);throw new Error(e||t.statusText||"HTTP ".concat(t.status))}r(n=>n.map(n=>(0,d.A)((0,d.A)({},n),{},{accounts:n.accounts.map(n=>n.account_id===e.account_id?(0,d.A)((0,d.A)({},n),{},{nickname:x}):n)}))),b(null),j("")}catch(t){console.error("Failed to update nickname:",t),alert("Failed to update nickname. "+(t.message||"Please try again."))}finally{k(!1)}}})(t),disabled:v,children:v?"Saving...":"Save"}),(0,i.jsx)("button",{className:"btn btn-sm",onClick:N,disabled:v,style:{background:"transparent"},children:"Cancel"})]})]}):(0,i.jsxs)(i.Fragment,{children:[t.nickname||t.name,(0,i.jsx)("button",{className:"edit-nickname",title:"Edit nickname",onClick:()=>(e=>{b(e.account_id),j(e.nickname||e.name||"")})(t),"aria-label":"Edit nickname for ".concat(t.nickname||t.name),children:(0,i.jsx)(h,{size:16})})]})}),(0,i.jsxs)("p",{className:"account-meta",children:["Type: ",t.type," ",t.subtype&&"(".concat(t.subtype,")")]})]}),(0,i.jsxs)("div",{className:"account-right",children:[(0,i.jsxs)("p",{className:"account-balance",children:["$",t.balance_current.toFixed(2)," ",t.currency]}),(0,i.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>{window.confirm("Are you sure you want to delete this account?")&&g(e.id)},children:"Delete"})]})]},t.account_id)):(0,i.jsx)("p",{className:"no-accounts",children:"No accounts found."})})]},e.id)})})]})]})},p=()=>{const{getAccessTokenSilently:e,isAuthenticated:n}=(0,c.WB)(),[t,o]=(0,a.useState)(null),[s,r]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(0);return(0,a.useEffect)(()=>{(async()=>{if(n)try{const n=await e({audience:"https://fastapiexample.com",scope:"test:read"});o(n)}catch(t){console.error("Error getting access token:",t)}finally{r(!1)}})()},[n,e]),s?(0,i.jsx)("div",{className:"accounts-container",children:(0,i.jsx)("div",{className:"loading-spinner",children:"Loading..."})}):t?(0,i.jsxs)("div",{className:"accounts-container",children:[(0,i.jsx)(l,{token:t,plaidConnected:d,setPlaidConnected:u,setConnectionsRefreshKey:p}),(0,i.jsx)(f,{token:t,plaidConnected:d,setPlaidConnected:u,connectionsRefreshKey:h})]}):(0,i.jsx)("div",{className:"accounts-container",children:(0,i.jsx)("div",{className:"error-message",children:"Unable to authenticate. Please try refreshing the page."})})}}}]);
//# sourceMappingURL=882.3105b1e4.chunk.js.map